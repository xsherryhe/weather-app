(()=>{"use strict";var e={689:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(537),o=n.n(r),a=n(645),c=n.n(a)()(o());c.push([e.id,".hidden {\n  display: none;\n}\n","",{version:3,sources:["webpack://./src/styles/all.css"],names:[],mappings:"AAAA;EACE,aAAa;AACf",sourcesContent:[".hidden {\n  display: none;\n}\n"],sourceRoot:""}]);const i=c},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,a){"string"==typeof e&&(e=[[null,e,void 0]]);var c={};if(r)for(var i=0;i<this.length;i++){var s=this[i][0];null!=s&&(c[s]=!0)}for(var u=0;u<e.length;u++){var d=[].concat(e[u]);r&&c[d[0]]||(void 0!==a&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=a),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),t.push(d))}},t}},537:e=>{e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),a="/*# ".concat(o," */"),c=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[t].concat(c).concat([a]).join("\n")}return[t].join("\n")}},379:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var a={},c=[],i=0;i<e.length;i++){var s=e[i],u=r.base?s[0]+r.base:s[0],d=a[u]||0,p="".concat(u," ").concat(d);a[u]=d+1;var l=n(p),m={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==l)t[l].references++,t[l].updater(m);else{var f=o(m,r);r.byIndex=i,t.splice(i,0,{identifier:p,updater:f,references:1})}c.push(p)}return c}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var a=r(e=e||[],o=o||{});return function(e){e=e||[];for(var c=0;c<a.length;c++){var i=n(a[c]);t[i].references--}for(var s=r(e,o),u=0;u<a.length;u++){var d=n(a[u]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}a=s}}},569:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={id:r,exports:{}};return e[r](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0;var r={};(()=>{n.d(r,{p:()=>_});var e=n(379),t=n.n(e),o=n(795),a=n.n(o),c=n(569),i=n.n(c),s=n(565),u=n.n(s),d=n(216),p=n.n(d),l=n(589),m=n.n(l),f=n(689),h={};h.styleTagTransform=m(),h.setAttributes=u(),h.insert=i().bind(null,"head"),h.domAPI=a(),h.insertStyleElement=p(),t()(f.Z,h),f.Z&&f.Z.locals&&f.Z.locals;const y={},v=["K","째F","째C"],w=["meter,second","mile,hour"],S=["hr24","hr12"],x=document.querySelector(".login"),b=document.querySelector(".login form"),g=document.querySelector(".weather"),C=document.querySelector(".weather .error"),q=document.querySelector(".weather .city"),M=document.querySelector(".weather .country"),A=document.querySelector(".weather .main-temperature"),E=document.querySelector(".weather .main-weather"),N=document.querySelector(".weather .feels-temperature"),L=document.querySelector(".weather .min-temperature"),$=document.querySelector(".weather .max-temperature"),I=document.querySelector(".weather .wind-speed"),j=document.querySelector(".weather .wind-direction"),T=document.querySelector(".weather .sunrise"),k=document.querySelector(".weather .sunset");async function F(e){const t=y.openWeatherMap,n=function(e){return e.replace(" ","+")}(e),r=await fetch(`https://api.openweathermap.org/data/2.5/weather?appid=${t}&q=${n}`);if(401===r.status)throw new Error("Invalid API Key");const{name:o,main:{feels_like:a,temp:c,temp_max:i,temp_min:s},sys:{country:u,sunrise:d,sunset:p},timezone:l,weather:[{description:m}],wind:{deg:f,speed:h}}=await r.json();return{name:o,country:u,weather:m,temp:c,tempMin:s,tempMax:i,tempFeels:a,windSpeed:h,windDirection:f,sunrise:d,sunset:p,timeZoneOffset:l}}function O(e,t){return Number(e).toFixed(t)}function D(e){return O(e,0)}function R(e){return D(e-273.15)}function Z(e){return D(function(e){return D(1.8*e+32)}(R(e)))}function P(e){return function(e){return O(e,2)}(2.237*e)}function U(e){return e.split(":").map(Number).join(":")}function W(e){const[t,n]=e.split(":").map(Number);let[r,o]=t<=11?["AM",0]:["PM",1];return 0===t&&(o+=12),`${t%13+o}:${n} ${r}`}async function _(e,t=F){const n={};try{const r=await t(e);(function(e){["temp","tempMax","tempMin","tempFeels"].forEach((t=>{e[t]=function(e){const t=v[1];return(0,{K:e=>e,"째F":Z,"째C":R}[t])(Number(e))+t}(e[t])})),["sunrise","sunset"].forEach((t=>{e[t]=function(e,t){const n=new Date(1e3*(Number(e)+Number(t))).toISOString().slice(11,16);return(0,{hr24:U,hr12:W}[S[1]])(n)}(e[t],e.timeZoneOffset)})),e.windSpeed=function(e){const t=w[1],n=(0,{"meter,second":e=>e,"mile,hour":P}[t])(Number(e)),r=t.split(",");return`${n} ${r[0]}${1===n?"":"s"} per ${r[1]}`}(e.windSpeed),e.windDirection=function(e){const t=e-22.5;return["N","NE","E","SE","S","SW","W","NW"][t>0&&t<315?Math.ceil(t/45):0]}(e.windDirection)})(r),n.body=r}catch(e){n.error=e.message}return n}b.addEventListener("submit",(function(e){e.preventDefault(),function(e){const t=e.querySelectorAll(".error"),n=e.querySelectorAll("input");return t.forEach((e=>{e.textContent="",e.classList.add("hidden")})),n.forEach((t=>{if(!t.checkValidity()){const n=e.querySelector(`#${t.id}+.error`);n.textContent=t.validationMessage,n.classList.remove("hidden")}})),e.checkValidity()}(b)&&(y.openWeatherMap=b.querySelector("#open-weather-map-api-key").value,y.giphy=b.querySelector("#giphy-api-key").value,x.classList.add("hidden"),g.classList.remove("hidden"),async function(e="New York City"){C.textContent="",C.classList.add("hidden");const t=await _(e);if(t.error)return C.textContent=`Something went wrong: ${t.error}`,void C.classList.remove("hidden");var n;n=t.body,q.textContent=n.name,M.textContent=n.country,A.textContent=n.temp,E.textContent=n.weather,N.textContent=n.tempFeels,L.textContent=n.tempMin,$.textContent=n.tempMax,I.textContent=n.windSpeed,j.textContent=n.windDirection,T.textContent=n.sunrise,k.textContent=n.sunset}())}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LGVBQTJCRSxFWGhCYSxpQldGN0MsY0FBc0MsR0FDdEMsZ0JBQXNDLFVBbUJ0QyxNQUFNcUQsUUFBb0JGLEVBQVduRCxHQUVyQyxHQUFJcUQsRUFBWStCLE1BR2QsT0FGQSxjQUFzQyx5QkFBeUIvQixFQUFZK0IsYUFDM0UsbUJBQXlDLFVBcEI3QyxJQUF5Qm5NLElBdUJQb0ssRUFBWTZCLEtBdEI1QixjQUE4QmpNLEVBQUt3SCxLQUNuQyxjQUFpQ3hILEVBQUsrSCxRQUN0QyxjQUFrQy9ILEVBQUsySCxLQUN2QyxjQUFxQzNILEVBQUttSSxRQUMxQyxjQUFtQ25JLEVBQUsySSxVQUN4QyxjQUFpQzNJLEVBQUt5SSxRQUN0QyxjQUFpQ3pJLEVBQUswSSxRQUN0QyxjQUFtQzFJLEVBQUs0SSxVQUN4QyxjQUF1QzVJLEVBQUs2SSxjQUM1QyxjQUFpQzdJLEVBQUtnSSxRQUN0QyxjQUFnQ2hJLEVBQUtpSSxNQWF2QyxDQUtFb0YsR0Z4QkYsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYXRoZXItYXBwLy4vc3JjL3N0eWxlcy9hbGwuY3NzIiwid2VicGFjazovL3dlYXRoZXItYXBwLy4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qcyIsIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9zb3VyY2VNYXBzLmpzIiwid2VicGFjazovL3dlYXRoZXItYXBwLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzIiwid2VicGFjazovL3dlYXRoZXItYXBwLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qcyIsIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydFN0eWxlRWxlbWVudC5qcyIsIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3NldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcy5qcyIsIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlRG9tQVBJLmpzIiwid2VicGFjazovL3dlYXRoZXItYXBwLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanMiLCJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3dlYXRoZXItYXBwL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvd2VicGFjay9ydW50aW1lL25vbmNlIiwid2VicGFjazovL3dlYXRoZXItYXBwLy4vc3JjL3N0eWxlcy9hbGwuY3NzPzE4ZWMiLCJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvLi9zcmMvc2NyaXB0cy9zZXR0aW5ncy5qcyIsIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC8uL3NyYy9zY3JpcHRzL2RvbS1lbGVtZW50cy5qcyIsIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC8uL3NyYy9zY3JpcHRzL29wZW4td2VhdGhlci1tYXAtYXBpLXByb3ZpZGVyLmpzIiwid2VicGFjazovL3dlYXRoZXItYXBwLy4vc3JjL3NjcmlwdHMvdXRpbGl0aWVzLmpzIiwid2VicGFjazovL3dlYXRoZXItYXBwLy4vc3JjL3NjcmlwdHMvdGVtcC1jb252ZXJ0LmpzIiwid2VicGFjazovL3dlYXRoZXItYXBwLy4vc3JjL3NjcmlwdHMvc3BlZWQtY29udmVydC5qcyIsIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC8uL3NyYy9zY3JpcHRzL3RpbWUtY29udmVydC5qcyIsIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC8uL3NyYy9zY3JpcHRzL3dlYXRoZXIuanMiLCJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvLi9zcmMvc2NyaXB0cy93aW5kLWRpcmVjdGlvbi1jb252ZXJ0LmpzIiwid2VicGFjazovL3dlYXRoZXItYXBwLy4vc3JjL3NjcmlwdHMvZG9tLWV2ZW50cy5qcyIsIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC8uL3NyYy9zY3JpcHRzL2Zvcm0tdmFsaWRhdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC8uL3NyYy9zY3JpcHRzL3ZpZXdzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEltcG9ydHNcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fIGZyb20gXCIuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvc291cmNlTWFwcy5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyBmcm9tIFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiO1xudmFyIF9fX0NTU19MT0FERVJfRVhQT1JUX19fID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18pO1xuLy8gTW9kdWxlXG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5wdXNoKFttb2R1bGUuaWQsIFwiLmhpZGRlbiB7XFxuICBkaXNwbGF5OiBub25lO1xcbn1cXG5cIiwgXCJcIix7XCJ2ZXJzaW9uXCI6MyxcInNvdXJjZXNcIjpbXCJ3ZWJwYWNrOi8vLi9zcmMvc3R5bGVzL2FsbC5jc3NcIl0sXCJuYW1lc1wiOltdLFwibWFwcGluZ3NcIjpcIkFBQUE7RUFDRSxhQUFhO0FBQ2ZcIixcInNvdXJjZXNDb250ZW50XCI6W1wiLmhpZGRlbiB7XFxuICBkaXNwbGF5OiBub25lO1xcbn1cXG5cIl0sXCJzb3VyY2VSb290XCI6XCJcIn1dKTtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IF9fX0NTU19MT0FERVJfRVhQT1JUX19fO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qXG4gIE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG4gIEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcbiovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKSB7XG4gIHZhciBsaXN0ID0gW107XG5cbiAgLy8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xuICBsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICB2YXIgY29udGVudCA9IFwiXCI7XG4gICAgICB2YXIgbmVlZExheWVyID0gdHlwZW9mIGl0ZW1bNV0gIT09IFwidW5kZWZpbmVkXCI7XG4gICAgICBpZiAoaXRlbVs0XSkge1xuICAgICAgICBjb250ZW50ICs9IFwiQHN1cHBvcnRzIChcIi5jb25jYXQoaXRlbVs0XSwgXCIpIHtcIik7XG4gICAgICB9XG4gICAgICBpZiAoaXRlbVsyXSkge1xuICAgICAgICBjb250ZW50ICs9IFwiQG1lZGlhIFwiLmNvbmNhdChpdGVtWzJdLCBcIiB7XCIpO1xuICAgICAgfVxuICAgICAgaWYgKG5lZWRMYXllcikge1xuICAgICAgICBjb250ZW50ICs9IFwiQGxheWVyXCIuY29uY2F0KGl0ZW1bNV0ubGVuZ3RoID4gMCA/IFwiIFwiLmNvbmNhdChpdGVtWzVdKSA6IFwiXCIsIFwiIHtcIik7XG4gICAgICB9XG4gICAgICBjb250ZW50ICs9IGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSk7XG4gICAgICBpZiAobmVlZExheWVyKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJ9XCI7XG4gICAgICB9XG4gICAgICBpZiAoaXRlbVsyXSkge1xuICAgICAgICBjb250ZW50ICs9IFwifVwiO1xuICAgICAgfVxuICAgICAgaWYgKGl0ZW1bNF0pIHtcbiAgICAgICAgY29udGVudCArPSBcIn1cIjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH0pLmpvaW4oXCJcIik7XG4gIH07XG5cbiAgLy8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3RcbiAgbGlzdC5pID0gZnVuY3Rpb24gaShtb2R1bGVzLCBtZWRpYSwgZGVkdXBlLCBzdXBwb3J0cywgbGF5ZXIpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZXMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIG1vZHVsZXMgPSBbW251bGwsIG1vZHVsZXMsIHVuZGVmaW5lZF1dO1xuICAgIH1cbiAgICB2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xuICAgIGlmIChkZWR1cGUpIHtcbiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgdGhpcy5sZW5ndGg7IGsrKykge1xuICAgICAgICB2YXIgaWQgPSB0aGlzW2tdWzBdO1xuICAgICAgICBpZiAoaWQgIT0gbnVsbCkge1xuICAgICAgICAgIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaWRdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHZhciBfayA9IDA7IF9rIDwgbW9kdWxlcy5sZW5ndGg7IF9rKyspIHtcbiAgICAgIHZhciBpdGVtID0gW10uY29uY2F0KG1vZHVsZXNbX2tdKTtcbiAgICAgIGlmIChkZWR1cGUgJiYgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgbGF5ZXIgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpdGVtWzVdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgaXRlbVs1XSA9IGxheWVyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1bMV0gPSBcIkBsYXllclwiLmNvbmNhdChpdGVtWzVdLmxlbmd0aCA+IDAgPyBcIiBcIi5jb25jYXQoaXRlbVs1XSkgOiBcIlwiLCBcIiB7XCIpLmNvbmNhdChpdGVtWzFdLCBcIn1cIik7XG4gICAgICAgICAgaXRlbVs1XSA9IGxheWVyO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobWVkaWEpIHtcbiAgICAgICAgaWYgKCFpdGVtWzJdKSB7XG4gICAgICAgICAgaXRlbVsyXSA9IG1lZGlhO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1bMV0gPSBcIkBtZWRpYSBcIi5jb25jYXQoaXRlbVsyXSwgXCIge1wiKS5jb25jYXQoaXRlbVsxXSwgXCJ9XCIpO1xuICAgICAgICAgIGl0ZW1bMl0gPSBtZWRpYTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHN1cHBvcnRzKSB7XG4gICAgICAgIGlmICghaXRlbVs0XSkge1xuICAgICAgICAgIGl0ZW1bNF0gPSBcIlwiLmNvbmNhdChzdXBwb3J0cyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbVsxXSA9IFwiQHN1cHBvcnRzIChcIi5jb25jYXQoaXRlbVs0XSwgXCIpIHtcIikuY29uY2F0KGl0ZW1bMV0sIFwifVwiKTtcbiAgICAgICAgICBpdGVtWzRdID0gc3VwcG9ydHM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGxpc3QucHVzaChpdGVtKTtcbiAgICB9XG4gIH07XG4gIHJldHVybiBsaXN0O1xufTsiLCJcInVzZSBzdHJpY3RcIjtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXRlbSkge1xuICB2YXIgY29udGVudCA9IGl0ZW1bMV07XG4gIHZhciBjc3NNYXBwaW5nID0gaXRlbVszXTtcbiAgaWYgKCFjc3NNYXBwaW5nKSB7XG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cbiAgaWYgKHR5cGVvZiBidG9hID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICB2YXIgYmFzZTY0ID0gYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoY3NzTWFwcGluZykpKSk7XG4gICAgdmFyIGRhdGEgPSBcInNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LFwiLmNvbmNhdChiYXNlNjQpO1xuICAgIHZhciBzb3VyY2VNYXBwaW5nID0gXCIvKiMgXCIuY29uY2F0KGRhdGEsIFwiICovXCIpO1xuICAgIHZhciBzb3VyY2VVUkxzID0gY3NzTWFwcGluZy5zb3VyY2VzLm1hcChmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICByZXR1cm4gXCIvKiMgc291cmNlVVJMPVwiLmNvbmNhdChjc3NNYXBwaW5nLnNvdXJjZVJvb3QgfHwgXCJcIikuY29uY2F0KHNvdXJjZSwgXCIgKi9cIik7XG4gICAgfSk7XG4gICAgcmV0dXJuIFtjb250ZW50XS5jb25jYXQoc291cmNlVVJMcykuY29uY2F0KFtzb3VyY2VNYXBwaW5nXSkuam9pbihcIlxcblwiKTtcbiAgfVxuICByZXR1cm4gW2NvbnRlbnRdLmpvaW4oXCJcXG5cIik7XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgc3R5bGVzSW5ET00gPSBbXTtcblxuZnVuY3Rpb24gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcikge1xuICB2YXIgcmVzdWx0ID0gLTE7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXNJbkRPTS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChzdHlsZXNJbkRPTVtpXS5pZGVudGlmaWVyID09PSBpZGVudGlmaWVyKSB7XG4gICAgICByZXN1bHQgPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpIHtcbiAgdmFyIGlkQ291bnRNYXAgPSB7fTtcbiAgdmFyIGlkZW50aWZpZXJzID0gW107XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBsaXN0W2ldO1xuICAgIHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuICAgIHZhciBjb3VudCA9IGlkQ291bnRNYXBbaWRdIHx8IDA7XG4gICAgdmFyIGlkZW50aWZpZXIgPSBcIlwiLmNvbmNhdChpZCwgXCIgXCIpLmNvbmNhdChjb3VudCk7XG4gICAgaWRDb3VudE1hcFtpZF0gPSBjb3VudCArIDE7XG4gICAgdmFyIGluZGV4QnlJZGVudGlmaWVyID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgdmFyIG9iaiA9IHtcbiAgICAgIGNzczogaXRlbVsxXSxcbiAgICAgIG1lZGlhOiBpdGVtWzJdLFxuICAgICAgc291cmNlTWFwOiBpdGVtWzNdLFxuICAgICAgc3VwcG9ydHM6IGl0ZW1bNF0sXG4gICAgICBsYXllcjogaXRlbVs1XVxuICAgIH07XG5cbiAgICBpZiAoaW5kZXhCeUlkZW50aWZpZXIgIT09IC0xKSB7XG4gICAgICBzdHlsZXNJbkRPTVtpbmRleEJ5SWRlbnRpZmllcl0ucmVmZXJlbmNlcysrO1xuICAgICAgc3R5bGVzSW5ET01baW5kZXhCeUlkZW50aWZpZXJdLnVwZGF0ZXIob2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHVwZGF0ZXIgPSBhZGRFbGVtZW50U3R5bGUob2JqLCBvcHRpb25zKTtcbiAgICAgIG9wdGlvbnMuYnlJbmRleCA9IGk7XG4gICAgICBzdHlsZXNJbkRPTS5zcGxpY2UoaSwgMCwge1xuICAgICAgICBpZGVudGlmaWVyOiBpZGVudGlmaWVyLFxuICAgICAgICB1cGRhdGVyOiB1cGRhdGVyLFxuICAgICAgICByZWZlcmVuY2VzOiAxXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZGVudGlmaWVycy5wdXNoKGlkZW50aWZpZXIpO1xuICB9XG5cbiAgcmV0dXJuIGlkZW50aWZpZXJzO1xufVxuXG5mdW5jdGlvbiBhZGRFbGVtZW50U3R5bGUob2JqLCBvcHRpb25zKSB7XG4gIHZhciBhcGkgPSBvcHRpb25zLmRvbUFQSShvcHRpb25zKTtcbiAgYXBpLnVwZGF0ZShvYmopO1xuXG4gIHZhciB1cGRhdGVyID0gZnVuY3Rpb24gdXBkYXRlcihuZXdPYmopIHtcbiAgICBpZiAobmV3T2JqKSB7XG4gICAgICBpZiAobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwICYmIG5ld09iai5zdXBwb3J0cyA9PT0gb2JqLnN1cHBvcnRzICYmIG5ld09iai5sYXllciA9PT0gb2JqLmxheWVyKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgYXBpLnVwZGF0ZShvYmogPSBuZXdPYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICBhcGkucmVtb3ZlKCk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiB1cGRhdGVyO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsaXN0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBsaXN0ID0gbGlzdCB8fCBbXTtcbiAgdmFyIGxhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XG4gICAgbmV3TGlzdCA9IG5ld0xpc3QgfHwgW107XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGlkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbaV07XG4gICAgICB2YXIgaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICAgIHN0eWxlc0luRE9NW2luZGV4XS5yZWZlcmVuY2VzLS07XG4gICAgfVxuXG4gICAgdmFyIG5ld0xhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShuZXdMaXN0LCBvcHRpb25zKTtcblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgX2lkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbX2ldO1xuXG4gICAgICB2YXIgX2luZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoX2lkZW50aWZpZXIpO1xuXG4gICAgICBpZiAoc3R5bGVzSW5ET01bX2luZGV4XS5yZWZlcmVuY2VzID09PSAwKSB7XG4gICAgICAgIHN0eWxlc0luRE9NW19pbmRleF0udXBkYXRlcigpO1xuXG4gICAgICAgIHN0eWxlc0luRE9NLnNwbGljZShfaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxhc3RJZGVudGlmaWVycyA9IG5ld0xhc3RJZGVudGlmaWVycztcbiAgfTtcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBtZW1vID0ge307XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cblxuZnVuY3Rpb24gZ2V0VGFyZ2V0KHRhcmdldCkge1xuICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHZhciBzdHlsZVRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTsgLy8gU3BlY2lhbCBjYXNlIHRvIHJldHVybiBoZWFkIG9mIGlmcmFtZSBpbnN0ZWFkIG9mIGlmcmFtZSBpdHNlbGZcblxuICAgIGlmICh3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQgJiYgc3R5bGVUYXJnZXQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkXG4gICAgICAgIC8vIGR1ZSB0byBjcm9zcy1vcmlnaW4gcmVzdHJpY3Rpb25zXG4gICAgICAgIHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBuZXh0XG4gICAgICAgIHN0eWxlVGFyZ2V0ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBtZW1vW3RhcmdldF0gPSBzdHlsZVRhcmdldDtcbiAgfVxuXG4gIHJldHVybiBtZW1vW3RhcmdldF07XG59XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cblxuXG5mdW5jdGlvbiBpbnNlcnRCeVNlbGVjdG9yKGluc2VydCwgc3R5bGUpIHtcbiAgdmFyIHRhcmdldCA9IGdldFRhcmdldChpbnNlcnQpO1xuXG4gIGlmICghdGFyZ2V0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnQnIHBhcmFtZXRlciBpcyBpbnZhbGlkLlwiKTtcbiAgfVxuXG4gIHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaW5zZXJ0QnlTZWxlY3RvcjsiLCJcInVzZSBzdHJpY3RcIjtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykge1xuICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgb3B0aW9ucy5zZXRBdHRyaWJ1dGVzKGVsZW1lbnQsIG9wdGlvbnMuYXR0cmlidXRlcyk7XG4gIG9wdGlvbnMuaW5zZXJ0KGVsZW1lbnQsIG9wdGlvbnMub3B0aW9ucyk7XG4gIHJldHVybiBlbGVtZW50O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGluc2VydFN0eWxlRWxlbWVudDsiLCJcInVzZSBzdHJpY3RcIjtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBzZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMoc3R5bGVFbGVtZW50KSB7XG4gIHZhciBub25jZSA9IHR5cGVvZiBfX3dlYnBhY2tfbm9uY2VfXyAhPT0gXCJ1bmRlZmluZWRcIiA/IF9fd2VicGFja19ub25jZV9fIDogbnVsbDtcblxuICBpZiAobm9uY2UpIHtcbiAgICBzdHlsZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwibm9uY2VcIiwgbm9uY2UpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzOyIsIlwidXNlIHN0cmljdFwiO1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGFwcGx5KHN0eWxlRWxlbWVudCwgb3B0aW9ucywgb2JqKSB7XG4gIHZhciBjc3MgPSBcIlwiO1xuXG4gIGlmIChvYmouc3VwcG9ydHMpIHtcbiAgICBjc3MgKz0gXCJAc3VwcG9ydHMgKFwiLmNvbmNhdChvYmouc3VwcG9ydHMsIFwiKSB7XCIpO1xuICB9XG5cbiAgaWYgKG9iai5tZWRpYSkge1xuICAgIGNzcyArPSBcIkBtZWRpYSBcIi5jb25jYXQob2JqLm1lZGlhLCBcIiB7XCIpO1xuICB9XG5cbiAgdmFyIG5lZWRMYXllciA9IHR5cGVvZiBvYmoubGF5ZXIgIT09IFwidW5kZWZpbmVkXCI7XG5cbiAgaWYgKG5lZWRMYXllcikge1xuICAgIGNzcyArPSBcIkBsYXllclwiLmNvbmNhdChvYmoubGF5ZXIubGVuZ3RoID4gMCA/IFwiIFwiLmNvbmNhdChvYmoubGF5ZXIpIDogXCJcIiwgXCIge1wiKTtcbiAgfVxuXG4gIGNzcyArPSBvYmouY3NzO1xuXG4gIGlmIChuZWVkTGF5ZXIpIHtcbiAgICBjc3MgKz0gXCJ9XCI7XG4gIH1cblxuICBpZiAob2JqLm1lZGlhKSB7XG4gICAgY3NzICs9IFwifVwiO1xuICB9XG5cbiAgaWYgKG9iai5zdXBwb3J0cykge1xuICAgIGNzcyArPSBcIn1cIjtcbiAgfVxuXG4gIHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXG4gIGlmIChzb3VyY2VNYXAgJiYgdHlwZW9mIGJ0b2EgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiLmNvbmNhdChidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpLCBcIiAqL1wiKTtcbiAgfSAvLyBGb3Igb2xkIElFXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuXG5cbiAgb3B0aW9ucy5zdHlsZVRhZ1RyYW5zZm9ybShjc3MsIHN0eWxlRWxlbWVudCwgb3B0aW9ucy5vcHRpb25zKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCkge1xuICAvLyBpc3RhbmJ1bCBpZ25vcmUgaWZcbiAgaWYgKHN0eWxlRWxlbWVudC5wYXJlbnROb2RlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgc3R5bGVFbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGVFbGVtZW50KTtcbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuXG5cbmZ1bmN0aW9uIGRvbUFQSShvcHRpb25zKSB7XG4gIHZhciBzdHlsZUVsZW1lbnQgPSBvcHRpb25zLmluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKTtcbiAgcmV0dXJuIHtcbiAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShvYmopIHtcbiAgICAgIGFwcGx5KHN0eWxlRWxlbWVudCwgb3B0aW9ucywgb2JqKTtcbiAgICB9LFxuICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgICAgcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCk7XG4gICAgfVxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRvbUFQSTsiLCJcInVzZSBzdHJpY3RcIjtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBzdHlsZVRhZ1RyYW5zZm9ybShjc3MsIHN0eWxlRWxlbWVudCkge1xuICBpZiAoc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZUVsZW1lbnQuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuICB9IGVsc2Uge1xuICAgIHdoaWxlIChzdHlsZUVsZW1lbnQuZmlyc3RDaGlsZCkge1xuICAgICAgc3R5bGVFbGVtZW50LnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKTtcbiAgICB9XG5cbiAgICBzdHlsZUVsZW1lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzdHlsZVRhZ1RyYW5zZm9ybTsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdGlkOiBtb2R1bGVJZCxcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5uYyA9IHVuZGVmaW5lZDsiLCJcbiAgICAgIGltcG9ydCBBUEkgZnJvbSBcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIjtcbiAgICAgIGltcG9ydCBkb21BUEkgZnJvbSBcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydEZuIGZyb20gXCIhLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qc1wiO1xuICAgICAgaW1wb3J0IHNldEF0dHJpYnV0ZXMgZnJvbSBcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRTdHlsZUVsZW1lbnQgZnJvbSBcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanNcIjtcbiAgICAgIGltcG9ydCBzdHlsZVRhZ1RyYW5zZm9ybUZuIGZyb20gXCIhLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanNcIjtcbiAgICAgIGltcG9ydCBjb250ZW50LCAqIGFzIG5hbWVkRXhwb3J0IGZyb20gXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vYWxsLmNzc1wiO1xuICAgICAgXG4gICAgICBcblxudmFyIG9wdGlvbnMgPSB7fTtcblxub3B0aW9ucy5zdHlsZVRhZ1RyYW5zZm9ybSA9IHN0eWxlVGFnVHJhbnNmb3JtRm47XG5vcHRpb25zLnNldEF0dHJpYnV0ZXMgPSBzZXRBdHRyaWJ1dGVzO1xuXG4gICAgICBvcHRpb25zLmluc2VydCA9IGluc2VydEZuLmJpbmQobnVsbCwgXCJoZWFkXCIpO1xuICAgIFxub3B0aW9ucy5kb21BUEkgPSBkb21BUEk7XG5vcHRpb25zLmluc2VydFN0eWxlRWxlbWVudCA9IGluc2VydFN0eWxlRWxlbWVudDtcblxudmFyIHVwZGF0ZSA9IEFQSShjb250ZW50LCBvcHRpb25zKTtcblxuXG5cbmV4cG9ydCAqIGZyb20gXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vYWxsLmNzc1wiO1xuICAgICAgIGV4cG9ydCBkZWZhdWx0IGNvbnRlbnQgJiYgY29udGVudC5sb2NhbHMgPyBjb250ZW50LmxvY2FscyA6IHVuZGVmaW5lZDtcbiIsImV4cG9ydCBjb25zdCBhcGlLZXlzID0ge307XG5cbmV4cG9ydCBjb25zdCB1bml0U2V0dGluZ3MgPSB7IHRlbXA6IDEsIHNwZWVkOiAxLCB0aW1lOiAxIH07XG5leHBvcnQgY29uc3QgdGVtcFVuaXRzID0gWydLJywgJ8KwRicsICfCsEMnXTtcbmV4cG9ydCBjb25zdCBzcGVlZFVuaXRzID0gWydtZXRlcixzZWNvbmQnLCAnbWlsZSxob3VyJ107XG5leHBvcnQgY29uc3QgdGltZVVuaXRzID0gWydocjI0JywgJ2hyMTInXTtcblxuZXhwb3J0IGNvbnN0IGxvY2F0aW9uU2V0dGluZ3MgPSB7IGRlZmF1bHRDaXR5OiAnTmV3IFlvcmsgQ2l0eScgfTtcbiIsImV4cG9ydCBjb25zdCBsb2dpbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9naW4nKTtcbmV4cG9ydCBjb25zdCBsb2dpbkZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9naW4gZm9ybScpO1xuZXhwb3J0IGNvbnN0IHdlYXRoZXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndlYXRoZXInKTtcbmV4cG9ydCBjb25zdCB3ZWF0aGVyRXJyb3JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndlYXRoZXIgLmVycm9yJyk7XG5leHBvcnQgY29uc3QgY2l0eUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2VhdGhlciAuY2l0eScpO1xuZXhwb3J0IGNvbnN0IGNvdW50cnlFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndlYXRoZXIgLmNvdW50cnknKTtcbmV4cG9ydCBjb25zdCBtYWluVGVtcEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAnLndlYXRoZXIgLm1haW4tdGVtcGVyYXR1cmUnXG4pO1xuZXhwb3J0IGNvbnN0IG1haW5XZWF0aGVyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICcud2VhdGhlciAubWFpbi13ZWF0aGVyJ1xuKTtcbmV4cG9ydCBjb25zdCBmZWVsc1RlbXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgJy53ZWF0aGVyIC5mZWVscy10ZW1wZXJhdHVyZSdcbik7XG5leHBvcnQgY29uc3QgbWluVGVtcEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAnLndlYXRoZXIgLm1pbi10ZW1wZXJhdHVyZSdcbik7XG5leHBvcnQgY29uc3QgbWF4VGVtcEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAnLndlYXRoZXIgLm1heC10ZW1wZXJhdHVyZSdcbik7XG5leHBvcnQgY29uc3Qgd2luZFNwZWVkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53ZWF0aGVyIC53aW5kLXNwZWVkJyk7XG5leHBvcnQgY29uc3Qgd2luZERpcmVjdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAnLndlYXRoZXIgLndpbmQtZGlyZWN0aW9uJ1xuKTtcbmV4cG9ydCBjb25zdCBzdW5yaXNlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53ZWF0aGVyIC5zdW5yaXNlJyk7XG5leHBvcnQgY29uc3Qgc3Vuc2V0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53ZWF0aGVyIC5zdW5zZXQnKTtcbiIsImltcG9ydCB7IGFwaUtleXMgfSBmcm9tICcuL3NldHRpbmdzJztcblxuZnVuY3Rpb24gcGFyYW1ldGVyaXplTG9jYXRpb24obG9jYXRpb24pIHtcbiAgcmV0dXJuIGxvY2F0aW9uLnJlcGxhY2UoJyAnLCAnKycpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBvcGVuV2VhdGhlck1hcEFQSVByb3ZpZGVyKGxvY2F0aW9uKSB7XG4gIGNvbnN0IGFwaUtleSA9IGFwaUtleXMub3BlbldlYXRoZXJNYXA7XG4gIGNvbnN0IGxvY2F0aW9uUGFyYW0gPSBwYXJhbWV0ZXJpemVMb2NhdGlvbihsb2NhdGlvbik7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgYGh0dHBzOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS93ZWF0aGVyP2FwcGlkPSR7YXBpS2V5fSZxPSR7bG9jYXRpb25QYXJhbX1gXG4gICk7XG4gIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIEFQSSBLZXknKTtcblxuICBjb25zdCB7XG4gICAgbmFtZSxcbiAgICBtYWluOiB7IGZlZWxzX2xpa2UsIHRlbXAsIHRlbXBfbWF4LCB0ZW1wX21pbiB9LFxuICAgIHN5czogeyBjb3VudHJ5LCBzdW5yaXNlLCBzdW5zZXQgfSxcbiAgICB0aW1lem9uZSxcbiAgICB3ZWF0aGVyOiBbeyBkZXNjcmlwdGlvbiB9XSxcbiAgICB3aW5kOiB7IGRlZywgc3BlZWQgfSxcbiAgfSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICByZXR1cm4ge1xuICAgIG5hbWUsXG4gICAgY291bnRyeSxcbiAgICB3ZWF0aGVyOiBkZXNjcmlwdGlvbixcbiAgICB0ZW1wLFxuICAgIHRlbXBNaW46IHRlbXBfbWluLFxuICAgIHRlbXBNYXg6IHRlbXBfbWF4LFxuICAgIHRlbXBGZWVsczogZmVlbHNfbGlrZSxcbiAgICB3aW5kU3BlZWQ6IHNwZWVkLFxuICAgIHdpbmREaXJlY3Rpb246IGRlZyxcbiAgICBzdW5yaXNlLFxuICAgIHN1bnNldCxcbiAgICB0aW1lWm9uZU9mZnNldDogdGltZXpvbmUsXG4gIH07XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gcm91bmQobnVtLCBwbGFjZSkge1xuICByZXR1cm4gTnVtYmVyKG51bSkudG9GaXhlZChwbGFjZSk7XG59XG4iLCJpbXBvcnQgeyByb3VuZCB9IGZyb20gJy4vdXRpbGl0aWVzJztcblxuZnVuY3Rpb24gcm91bmRUZW1wKHRlbXApIHtcbiAgcmV0dXJuIHJvdW5kKHRlbXAsIDApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24ga2VsdmluVG9DZWxzaXVzKHRlbXApIHtcbiAgcmV0dXJuIHJvdW5kVGVtcCh0ZW1wIC0gMjczLjE1KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNlbHNpdXNUb0tlbHZpbih0ZW1wKSB7XG4gIHJldHVybiByb3VuZFRlbXAodGVtcCArIDI3My4xNSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmYWhyZW5oZWl0VG9DZWxzaXVzKHRlbXApIHtcbiAgcmV0dXJuIHJvdW5kVGVtcCgodGVtcCAtIDMyKSAqICg1IC8gOSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2Vsc2l1c1RvRmFocmVuaGVpdCh0ZW1wKSB7XG4gIHJldHVybiByb3VuZFRlbXAodGVtcCAqICg5IC8gNSkgKyAzMik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBrZWx2aW5Ub0ZhaHJlbmhlaXQodGVtcCkge1xuICByZXR1cm4gcm91bmRUZW1wKGNlbHNpdXNUb0ZhaHJlbmhlaXQoa2VsdmluVG9DZWxzaXVzKHRlbXApKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmYWhyZW5oZWl0VG9LZWx2aW4odGVtcCkge1xuICByZXR1cm4gcm91bmRUZW1wKGNlbHNpdXNUb0tlbHZpbihmYWhyZW5oZWl0VG9DZWxzaXVzKHRlbXApKSk7XG59XG4iLCJpbXBvcnQgeyByb3VuZCB9IGZyb20gJy4vdXRpbGl0aWVzJztcblxuZnVuY3Rpb24gcm91bmRTcGVlZChzcGVlZCkge1xuICByZXR1cm4gcm91bmQoc3BlZWQsIDIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWV0ZXJzU2Vjb25kc1RvTWlsZXNIb3VycyhzcGVlZCkge1xuICByZXR1cm4gcm91bmRTcGVlZChzcGVlZCAqIDIuMjM3KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1pbGVzSG91cnNUb01ldGVyc1NlY29uZHMoc3BlZWQpIHtcbiAgcmV0dXJuIHJvdW5kU3BlZWQoc3BlZWQgLyAyLjIzNyk7XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gbm9QYWRkaW5nKHRpbWUpIHtcbiAgcmV0dXJuIHRpbWUuc3BsaXQoJzonKS5tYXAoTnVtYmVyKS5qb2luKCc6Jyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBocjI0VG9IcjEyKHRpbWUpIHtcbiAgY29uc3QgW2hvdXIsIG1pbnV0ZV0gPSB0aW1lLnNwbGl0KCc6JykubWFwKE51bWJlcik7XG4gIGxldCBbYW1wbSwgb2Zmc2V0XSA9IGhvdXIgPD0gMTEgPyBbJ0FNJywgMF0gOiBbJ1BNJywgMV07XG4gIGlmIChob3VyID09PSAwKSBvZmZzZXQgKz0gMTI7XG4gIHJldHVybiBgJHsoaG91ciAlIDEzKSArIG9mZnNldH06JHttaW51dGV9ICR7YW1wbX1gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaHIxMlRvSHIyNCh0aW1lKSB7XG4gIGNvbnN0IFtudW1UaW1lLCBhbXBtXSA9IHRpbWUuc3BsaXQoJyAnKTtcbiAgY29uc3QgW2hvdXIsIG1pbnV0ZV0gPSBudW1UaW1lLnNwbGl0KCc6JykubWFwKE51bWJlcik7XG4gIGxldCBvZmZzZXQgPSBhbXBtID09PSAnUE0nID8gMTIgOiAwO1xuICBpZiAoaG91ciA9PT0gMTIgJiYgYW1wbSA9PT0gJ0FNJykgb2Zmc2V0IC09IDEyO1xuICByZXR1cm4gYCR7aG91ciArIG9mZnNldH06JHttaW51dGV9YDtcbn1cbiIsImltcG9ydCBvcGVuV2VhdGhlck1hcEFQSVByb3ZpZGVyIGZyb20gJy4vb3Blbi13ZWF0aGVyLW1hcC1hcGktcHJvdmlkZXInO1xuaW1wb3J0IHsgdW5pdFNldHRpbmdzLCB0ZW1wVW5pdHMsIHNwZWVkVW5pdHMsIHRpbWVVbml0cyB9IGZyb20gJy4vc2V0dGluZ3MnO1xuaW1wb3J0IHsga2VsdmluVG9DZWxzaXVzLCBrZWx2aW5Ub0ZhaHJlbmhlaXQgfSBmcm9tICcuL3RlbXAtY29udmVydCc7XG5pbXBvcnQgeyBtZXRlcnNTZWNvbmRzVG9NaWxlc0hvdXJzIH0gZnJvbSAnLi9zcGVlZC1jb252ZXJ0JztcbmltcG9ydCB7IGhyMjRUb0hyMTIsIG5vUGFkZGluZyB9IGZyb20gJy4vdGltZS1jb252ZXJ0JztcbmltcG9ydCBkZWdyZWVzVG9EaXJlY3Rpb24gZnJvbSAnLi93aW5kLWRpcmVjdGlvbi1jb252ZXJ0JztcblxuZnVuY3Rpb24gY29udmVydFRlbXAodGVtcFZhbCkge1xuICBjb25zdCB0ZW1wVW5pdCA9IHRlbXBVbml0c1t1bml0U2V0dGluZ3MudGVtcF07XG4gIGNvbnN0IGNvbnZlcnRGbiA9IHtcbiAgICBLOiAodmFsKSA9PiB2YWwsXG4gICAgJ8KwRic6IGtlbHZpblRvRmFocmVuaGVpdCxcbiAgICAnwrBDJzoga2VsdmluVG9DZWxzaXVzLFxuICB9W3RlbXBVbml0XTtcbiAgcmV0dXJuIGNvbnZlcnRGbihOdW1iZXIodGVtcFZhbCkpICsgdGVtcFVuaXQ7XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRTcGVlZChzcGVlZFZhbCkge1xuICBjb25zdCBzcGVlZFVuaXQgPSBzcGVlZFVuaXRzW3VuaXRTZXR0aW5ncy5zcGVlZF07XG4gIGNvbnN0IGNvbnZlcnRGbiA9IHtcbiAgICAnbWV0ZXIsc2Vjb25kJzogKHZhbCkgPT4gdmFsLFxuICAgICdtaWxlLGhvdXInOiBtZXRlcnNTZWNvbmRzVG9NaWxlc0hvdXJzLFxuICB9W3NwZWVkVW5pdF07XG4gIGNvbnN0IGNvbnZlcnRlZFNwZWVkID0gY29udmVydEZuKE51bWJlcihzcGVlZFZhbCkpO1xuICBjb25zdCBzcGVlZFVuaXRXb3JkcyA9IHNwZWVkVW5pdC5zcGxpdCgnLCcpO1xuICByZXR1cm4gYCR7Y29udmVydGVkU3BlZWR9ICR7c3BlZWRVbml0V29yZHNbMF19JHtcbiAgICBjb252ZXJ0ZWRTcGVlZCA9PT0gMSA/ICcnIDogJ3MnXG4gIH0gcGVyICR7c3BlZWRVbml0V29yZHNbMV19YDtcbn1cblxuZnVuY3Rpb24gY29udmVydFRpbWUodW5peFRpbWUsIHRpbWVab25lT2Zmc2V0KSB7XG4gIGNvbnN0IHRpbWUgPSBuZXcgRGF0ZSgoTnVtYmVyKHVuaXhUaW1lKSArIE51bWJlcih0aW1lWm9uZU9mZnNldCkpICogMTAwMClcbiAgICAudG9JU09TdHJpbmcoKVxuICAgIC5zbGljZSgxMSwgMTYpO1xuICBjb25zdCB0aW1lVW5pdCA9IHRpbWVVbml0c1t1bml0U2V0dGluZ3MudGltZV07XG4gIGNvbnN0IGNvbnZlcnRGbiA9IHtcbiAgICBocjI0OiBub1BhZGRpbmcsXG4gICAgaHIxMjogaHIyNFRvSHIxMixcbiAgfVt0aW1lVW5pdF07XG4gIHJldHVybiBjb252ZXJ0Rm4odGltZSk7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFdlYXRoZXJEYXRhQm9keSh3ZWF0aGVyRGF0YUJvZHkpIHtcbiAgWyd0ZW1wJywgJ3RlbXBNYXgnLCAndGVtcE1pbicsICd0ZW1wRmVlbHMnXS5mb3JFYWNoKCh0ZW1wUHJvcCkgPT4ge1xuICAgIHdlYXRoZXJEYXRhQm9keVt0ZW1wUHJvcF0gPSBjb252ZXJ0VGVtcCh3ZWF0aGVyRGF0YUJvZHlbdGVtcFByb3BdKTtcbiAgfSk7XG4gIFsnc3VucmlzZScsICdzdW5zZXQnXS5mb3JFYWNoKCh0aW1lUHJvcCkgPT4ge1xuICAgIHdlYXRoZXJEYXRhQm9keVt0aW1lUHJvcF0gPSBjb252ZXJ0VGltZShcbiAgICAgIHdlYXRoZXJEYXRhQm9keVt0aW1lUHJvcF0sXG4gICAgICB3ZWF0aGVyRGF0YUJvZHkudGltZVpvbmVPZmZzZXRcbiAgICApO1xuICB9KTtcbiAgd2VhdGhlckRhdGFCb2R5LndpbmRTcGVlZCA9IGNvbnZlcnRTcGVlZCh3ZWF0aGVyRGF0YUJvZHkud2luZFNwZWVkKTtcbiAgd2VhdGhlckRhdGFCb2R5LndpbmREaXJlY3Rpb24gPSBkZWdyZWVzVG9EaXJlY3Rpb24oXG4gICAgd2VhdGhlckRhdGFCb2R5LndpbmREaXJlY3Rpb25cbiAgKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gZ2V0V2VhdGhlcihcbiAgbG9jYXRpb24sXG4gIHdlYXRoZXJQcm92aWRlciA9IG9wZW5XZWF0aGVyTWFwQVBJUHJvdmlkZXJcbikge1xuICBjb25zdCB3ZWF0aGVyRGF0YSA9IHt9O1xuICB0cnkge1xuICAgIGNvbnN0IHdlYXRoZXJEYXRhQm9keSA9IGF3YWl0IHdlYXRoZXJQcm92aWRlcihsb2NhdGlvbik7XG4gICAgZm9ybWF0V2VhdGhlckRhdGFCb2R5KHdlYXRoZXJEYXRhQm9keSk7XG4gICAgd2VhdGhlckRhdGEuYm9keSA9IHdlYXRoZXJEYXRhQm9keTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgd2VhdGhlckRhdGEuZXJyb3IgPSBlcnIubWVzc2FnZTtcbiAgfVxuICByZXR1cm4gd2VhdGhlckRhdGE7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBkZWdyZWVzVG9EaXJlY3Rpb24oZGVncmVlcykge1xuICBjb25zdCBhZGp1c3RlZCA9IGRlZ3JlZXMgLSAyMi41O1xuICByZXR1cm4gWydOJywgJ05FJywgJ0UnLCAnU0UnLCAnUycsICdTVycsICdXJywgJ05XJ11bXG4gICAgYWRqdXN0ZWQgPiAwICYmIGFkanVzdGVkIDwgMzE1ID8gTWF0aC5jZWlsKGFkanVzdGVkIC8gNDUpIDogMFxuICBdO1xufVxuIiwiaW1wb3J0IHsgYXBpS2V5cyB9IGZyb20gJy4vc2V0dGluZ3MnO1xuaW1wb3J0IHsgbG9naW5Gb3JtIH0gZnJvbSAnLi9kb20tZWxlbWVudHMnO1xuaW1wb3J0IHZhbGlkYXRlIGZyb20gJy4vZm9ybS12YWxpZGF0aW9uJztcbmltcG9ydCB7IGRlZmF1bHRXZWF0aGVyVmlldyB9IGZyb20gJy4vdmlld3MnO1xuXG5mdW5jdGlvbiBsb2dpbihlKSB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgaWYgKCF2YWxpZGF0ZShsb2dpbkZvcm0pKSByZXR1cm47XG5cbiAgYXBpS2V5cy5vcGVuV2VhdGhlck1hcCA9IGxvZ2luRm9ybS5xdWVyeVNlbGVjdG9yKFxuICAgICcjb3Blbi13ZWF0aGVyLW1hcC1hcGkta2V5J1xuICApLnZhbHVlO1xuICBhcGlLZXlzLmdpcGh5ID0gbG9naW5Gb3JtLnF1ZXJ5U2VsZWN0b3IoJyNnaXBoeS1hcGkta2V5JykudmFsdWU7XG4gIGRlZmF1bHRXZWF0aGVyVmlldygpO1xufVxubG9naW5Gb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGxvZ2luKTtcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHZhbGlkYXRlKGZvcm0pIHtcbiAgY29uc3QgZXJyb3JFbGVtZW50cyA9IGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnLmVycm9yJyk7XG4gIGNvbnN0IGlucHV0cyA9IGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKTtcbiAgZXJyb3JFbGVtZW50cy5mb3JFYWNoKChlcnJvckVsZW1lbnQpID0+IHtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gIH0pO1xuXG4gIGlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgIGlmICghaW5wdXQuY2hlY2tWYWxpZGl0eSgpKSB7XG4gICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0LmlkfSsuZXJyb3JgKTtcbiAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGZvcm0uY2hlY2tWYWxpZGl0eSgpO1xufVxuIiwiaW1wb3J0ICogYXMgZG9tIGZyb20gJy4vZG9tLWVsZW1lbnRzJztcbmltcG9ydCB7IGxvY2F0aW9uU2V0dGluZ3MgfSBmcm9tICcuL3NldHRpbmdzJztcbmltcG9ydCB7IGdldFdlYXRoZXIgfSBmcm9tICcuL2FwcGxpY2F0aW9uJztcblxuZnVuY3Rpb24gY2xlYXJXZWF0aGVyRXJyb3IoKSB7XG4gIGRvbS53ZWF0aGVyRXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XG4gIGRvbS53ZWF0aGVyRXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xufVxuXG5mdW5jdGlvbiBwb3B1bGF0ZVdlYXRoZXIoZGF0YSkge1xuICBkb20uY2l0eUVsZW1lbnQudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gIGRvbS5jb3VudHJ5RWxlbWVudC50ZXh0Q29udGVudCA9IGRhdGEuY291bnRyeTtcbiAgZG9tLm1haW5UZW1wRWxlbWVudC50ZXh0Q29udGVudCA9IGRhdGEudGVtcDtcbiAgZG9tLm1haW5XZWF0aGVyRWxlbWVudC50ZXh0Q29udGVudCA9IGRhdGEud2VhdGhlcjtcbiAgZG9tLmZlZWxzVGVtcEVsZW1lbnQudGV4dENvbnRlbnQgPSBkYXRhLnRlbXBGZWVscztcbiAgZG9tLm1pblRlbXBFbGVtZW50LnRleHRDb250ZW50ID0gZGF0YS50ZW1wTWluO1xuICBkb20ubWF4VGVtcEVsZW1lbnQudGV4dENvbnRlbnQgPSBkYXRhLnRlbXBNYXg7XG4gIGRvbS53aW5kU3BlZWRFbGVtZW50LnRleHRDb250ZW50ID0gZGF0YS53aW5kU3BlZWQ7XG4gIGRvbS53aW5kRGlyZWN0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IGRhdGEud2luZERpcmVjdGlvbjtcbiAgZG9tLnN1bnJpc2VFbGVtZW50LnRleHRDb250ZW50ID0gZGF0YS5zdW5yaXNlO1xuICBkb20uc3Vuc2V0RWxlbWVudC50ZXh0Q29udGVudCA9IGRhdGEuc3Vuc2V0O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gd2VhdGhlclZpZXcobG9jYXRpb24gPSBsb2NhdGlvblNldHRpbmdzLmRlZmF1bHRDaXR5KSB7XG4gIGNsZWFyV2VhdGhlckVycm9yKCk7XG4gIGNvbnN0IHdlYXRoZXJEYXRhID0gYXdhaXQgZ2V0V2VhdGhlcihsb2NhdGlvbik7XG5cbiAgaWYgKHdlYXRoZXJEYXRhLmVycm9yKSB7XG4gICAgZG9tLndlYXRoZXJFcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBgU29tZXRoaW5nIHdlbnQgd3Jvbmc6ICR7d2VhdGhlckRhdGEuZXJyb3J9YDtcbiAgICBkb20ud2VhdGhlckVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICByZXR1cm47XG4gIH1cbiAgcG9wdWxhdGVXZWF0aGVyKHdlYXRoZXJEYXRhLmJvZHkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdFdlYXRoZXJWaWV3KCkge1xuICBkb20ubG9naW5FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICBkb20ud2VhdGhlckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gIHdlYXRoZXJWaWV3KCk7XG59XG4iXSwibmFtZXMiOlsiX19fQ1NTX0xPQURFUl9FWFBPUlRfX18iLCJwdXNoIiwibW9kdWxlIiwiaWQiLCJleHBvcnRzIiwiY3NzV2l0aE1hcHBpbmdUb1N0cmluZyIsImxpc3QiLCJ0b1N0cmluZyIsInRoaXMiLCJtYXAiLCJpdGVtIiwiY29udGVudCIsIm5lZWRMYXllciIsImNvbmNhdCIsImxlbmd0aCIsImpvaW4iLCJpIiwibW9kdWxlcyIsIm1lZGlhIiwiZGVkdXBlIiwic3VwcG9ydHMiLCJsYXllciIsInVuZGVmaW5lZCIsImFscmVhZHlJbXBvcnRlZE1vZHVsZXMiLCJrIiwiX2siLCJjc3NNYXBwaW5nIiwiYnRvYSIsImJhc2U2NCIsInVuZXNjYXBlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiSlNPTiIsInN0cmluZ2lmeSIsImRhdGEiLCJzb3VyY2VNYXBwaW5nIiwic291cmNlVVJMcyIsInNvdXJjZXMiLCJzb3VyY2UiLCJzb3VyY2VSb290Iiwic3R5bGVzSW5ET00iLCJnZXRJbmRleEJ5SWRlbnRpZmllciIsImlkZW50aWZpZXIiLCJyZXN1bHQiLCJtb2R1bGVzVG9Eb20iLCJvcHRpb25zIiwiaWRDb3VudE1hcCIsImlkZW50aWZpZXJzIiwiYmFzZSIsImNvdW50IiwiaW5kZXhCeUlkZW50aWZpZXIiLCJvYmoiLCJjc3MiLCJzb3VyY2VNYXAiLCJyZWZlcmVuY2VzIiwidXBkYXRlciIsImFkZEVsZW1lbnRTdHlsZSIsImJ5SW5kZXgiLCJzcGxpY2UiLCJhcGkiLCJkb21BUEkiLCJ1cGRhdGUiLCJuZXdPYmoiLCJyZW1vdmUiLCJsYXN0SWRlbnRpZmllcnMiLCJuZXdMaXN0IiwiaW5kZXgiLCJuZXdMYXN0SWRlbnRpZmllcnMiLCJfaSIsIl9pbmRleCIsIm1lbW8iLCJpbnNlcnQiLCJzdHlsZSIsInRhcmdldCIsInN0eWxlVGFyZ2V0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwid2luZG93IiwiSFRNTElGcmFtZUVsZW1lbnQiLCJjb250ZW50RG9jdW1lbnQiLCJoZWFkIiwiZSIsImdldFRhcmdldCIsIkVycm9yIiwiYXBwZW5kQ2hpbGQiLCJlbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZXMiLCJhdHRyaWJ1dGVzIiwic3R5bGVFbGVtZW50Iiwibm9uY2UiLCJzZXRBdHRyaWJ1dGUiLCJpbnNlcnRTdHlsZUVsZW1lbnQiLCJzdHlsZVRhZ1RyYW5zZm9ybSIsImFwcGx5IiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwicmVtb3ZlU3R5bGVFbGVtZW50Iiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJmaXJzdENoaWxkIiwiY3JlYXRlVGV4dE5vZGUiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwibiIsImdldHRlciIsIl9fZXNNb2R1bGUiLCJkIiwiYSIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIm5jIiwiYXBpS2V5cyIsInRlbXBVbml0cyIsInNwZWVkVW5pdHMiLCJ0aW1lVW5pdHMiLCJsb2dpbkVsZW1lbnQiLCJsb2dpbkZvcm0iLCJ3ZWF0aGVyRWxlbWVudCIsIndlYXRoZXJFcnJvckVsZW1lbnQiLCJjaXR5RWxlbWVudCIsImNvdW50cnlFbGVtZW50IiwibWFpblRlbXBFbGVtZW50IiwibWFpbldlYXRoZXJFbGVtZW50IiwiZmVlbHNUZW1wRWxlbWVudCIsIm1pblRlbXBFbGVtZW50IiwibWF4VGVtcEVsZW1lbnQiLCJ3aW5kU3BlZWRFbGVtZW50Iiwid2luZERpcmVjdGlvbkVsZW1lbnQiLCJzdW5yaXNlRWxlbWVudCIsInN1bnNldEVsZW1lbnQiLCJhc3luYyIsIm9wZW5XZWF0aGVyTWFwQVBJUHJvdmlkZXIiLCJsb2NhdGlvbiIsImFwaUtleSIsIm9wZW5XZWF0aGVyTWFwIiwibG9jYXRpb25QYXJhbSIsInJlcGxhY2UiLCJwYXJhbWV0ZXJpemVMb2NhdGlvbiIsInJlc3BvbnNlIiwiZmV0Y2giLCJzdGF0dXMiLCJuYW1lIiwibWFpbiIsImZlZWxzX2xpa2UiLCJ0ZW1wIiwidGVtcF9tYXgiLCJ0ZW1wX21pbiIsInN5cyIsImNvdW50cnkiLCJzdW5yaXNlIiwic3Vuc2V0IiwidGltZXpvbmUiLCJ3ZWF0aGVyIiwiZGVzY3JpcHRpb24iLCJ3aW5kIiwiZGVnIiwic3BlZWQiLCJqc29uIiwidGVtcE1pbiIsInRlbXBNYXgiLCJ0ZW1wRmVlbHMiLCJ3aW5kU3BlZWQiLCJ3aW5kRGlyZWN0aW9uIiwidGltZVpvbmVPZmZzZXQiLCJyb3VuZCIsIm51bSIsInBsYWNlIiwiTnVtYmVyIiwidG9GaXhlZCIsInJvdW5kVGVtcCIsImtlbHZpblRvQ2Vsc2l1cyIsImtlbHZpblRvRmFocmVuaGVpdCIsImNlbHNpdXNUb0ZhaHJlbmhlaXQiLCJtZXRlcnNTZWNvbmRzVG9NaWxlc0hvdXJzIiwicm91bmRTcGVlZCIsIm5vUGFkZGluZyIsInRpbWUiLCJzcGxpdCIsImhyMjRUb0hyMTIiLCJob3VyIiwibWludXRlIiwiYW1wbSIsIm9mZnNldCIsImdldFdlYXRoZXIiLCJ3ZWF0aGVyUHJvdmlkZXIiLCJ3ZWF0aGVyRGF0YSIsIndlYXRoZXJEYXRhQm9keSIsImZvckVhY2giLCJ0ZW1wUHJvcCIsInRlbXBWYWwiLCJ0ZW1wVW5pdCIsImNvbnZlcnRGbiIsIksiLCJ2YWwiLCJjb252ZXJ0VGVtcCIsInRpbWVQcm9wIiwidW5peFRpbWUiLCJEYXRlIiwidG9JU09TdHJpbmciLCJzbGljZSIsImhyMjQiLCJocjEyIiwiY29udmVydFRpbWUiLCJzcGVlZFZhbCIsInNwZWVkVW5pdCIsImNvbnZlcnRlZFNwZWVkIiwic3BlZWRVbml0V29yZHMiLCJjb252ZXJ0U3BlZWQiLCJkZWdyZWVzIiwiYWRqdXN0ZWQiLCJNYXRoIiwiY2VpbCIsImRlZ3JlZXNUb0RpcmVjdGlvbiIsImZvcm1hdFdlYXRoZXJEYXRhQm9keSIsImJvZHkiLCJlcnIiLCJlcnJvciIsIm1lc3NhZ2UiLCJhZGRFdmVudExpc3RlbmVyIiwicHJldmVudERlZmF1bHQiLCJmb3JtIiwiZXJyb3JFbGVtZW50cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dHMiLCJlcnJvckVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsImNsYXNzTGlzdCIsImFkZCIsImlucHV0IiwiY2hlY2tWYWxpZGl0eSIsInZhbGlkYXRpb25NZXNzYWdlIiwidmFsaWRhdGUiLCJ2YWx1ZSIsImdpcGh5Iiwid2VhdGhlclZpZXciXSwic291cmNlUm9vdCI6IiJ9